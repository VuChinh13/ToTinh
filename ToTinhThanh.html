<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>T·ªè t√¨nh v·ªõi Thanh üíñ</title>
  <style>
    body {
      background-image: url('thanh.jpg'); /* Thay ·∫£nh n·ªÅn t·∫°i ƒë√¢y */
      background-size: cover;
      background-position: center;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      overflow: hidden;
    }

    .container {
      background: rgba(0, 0, 0, 0.6);
      padding: 30px;
      border-radius: 20px;
      color: white;
      max-width: 700px;
      display: none;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 1s ease;
    }

    button {
      padding: 15px 30px;
      font-size: 1.1em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 15px;
      transition: 0.3s;
    }

    .next-btn {
      background-color: #ff69b4;
      color: white;
    }

    #yesBtn {
      background-color: #4CAF50;
      color: white;
    }

    #noBtn {
      background-color: #f44336;
      color: white;
      position: absolute;
    }

    #message {
      font-size: 2em;
      color: #ffff66;
      margin-top: 20px;
      display: none;
      text-shadow: 1px 1px 4px #000;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 2s ease forwards;
      z-index: 1;
    }

    #heart-img {
      width: 80px;
      margin-top: 20px;
      animation: heartbeat 1s infinite;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }

    .heart {
      position: fixed;
      width: 20px;
      height: 20px;
      background-color: pink;
      transform: rotate(45deg);
      animation: float 4s linear forwards;
      z-index: 0;
    }

    .heart::before,
    .heart::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: pink;
      border-radius: 50%;
    }

    .heart::before {
      top: -10px;
      left: 0;
    }

    .heart::after {
      left: -10px;
      top: 0;
    }

    @keyframes float {
      0% {
        bottom: 0;
        opacity: 1;
        transform: translateX(0) scale(1);
      }
      100% {
        bottom: 100%;
        opacity: 0;
        transform: translateX(-50px) scale(1.5);
      }
    }
  </style>
</head>
<body>

  <!-- Nh·∫°c m·ªü ƒë·∫ßu -->
  <audio id="introMusic" src="nhacmodau.mp3" autoplay muted loop preload="auto"></audio>

  <!-- Nh·∫°c ch√≠nh -->
  <audio id="mainMusic" src="totinh.mp3" muted preload="auto"></audio>

  <!-- D·∫´n d·∫Øt c√¢u chuy·ªán -->
  <div class="container" id="storyContainer">
    <p id="storyText">B√© Thanh ∆°i, ch·∫£ l√†...</p>
    <button class="next-btn" id="nextBtn">üëâ Ti·∫øp t·ª•c</button>
  </div>

  <!-- Ph·∫ßn c√¢u h·ªèi -->
  <div class="container" id="questionContainer" style="display:none;">
    <h2>T·ªõ th√≠ch c·∫≠u ü•∫</h2>
    <p>C·∫≠u c√≥ th√≠ch t·ªõ kh√¥ng?</p>
    <button id="yesBtn">C√≥ üíñ</button>
    <button id="noBtn">Kh√¥ng üò¢</button>
  </div>

  <!-- Ph·∫ßn k·∫øt -->
  <div class="container" id="message">
    <p>C·∫£m ∆°n Thanh, Y√™u c·∫≠u ·∫° üíï</p>
    <img id="heart-img" src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="heart" />
  </div>

  <script>
    const introMusic = document.getElementById("introMusic");
    const mainMusic = document.getElementById("mainMusic");

    const storyLines = [
      "B√© Thanh ∆°i, ch·∫£ l√†...",
      "Sau m·ªôt kho·∫£ng th·ªùi gian quen c·∫≠u...",
      "T·ªõ c·∫£m th·∫•y c·∫≠u l√† m·ªôt c√¥ g√°i xinh ƒë·∫πp, hi·ªÅn d·ªãu...",
      "Gi·ªçng th√¨ nghe d·ªÖ th∆∞∆°ng n·ªØa...",
      "Kh√¥ng nh·ªØng th·∫ø c√≤n chƒÉm ch·ªâ n·ªØa...",
      "Ch√≠nh v√¨ ƒëi·ªÅu ƒë√≥ m√† l√≤ng t·ªõ ƒë√£ xao xuy·∫øn v√¨ c·∫≠u m·∫•t r·ªìi...",
      "Thanh ∆°i, t·ªõ c√≥ ƒëi·ªÅu mu·ªën n√≥i...",
      "T·ªõ th√≠ch c·∫≠u ü•∫"
    ];

    let currentStep = 0;
    const storyText = document.getElementById("storyText");
    const storyContainer = document.getElementById("storyContainer");
    const nextBtn = document.getElementById("nextBtn");

    const questionContainer = document.getElementById("questionContainer");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const message = document.getElementById("message");

    // Ph√°t nh·∫°c m·ªü ƒë·∫ßu khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c
    window.addEventListener("click", () => {
      introMusic.muted = false;
      introMusic.play();
    }, { once: true });

    storyContainer.style.display = "flex";

    nextBtn.onclick = () => {
      currentStep++;
      if (currentStep < storyLines.length) {
        storyText.textContent = storyLines[currentStep];
      } else {
        storyContainer.style.display = "none";
        questionContainer.style.display = "flex";
      }
    };

    yesBtn.onclick = () => {
      questionContainer.style.display = "none";
      message.style.display = "flex";

      // ƒê·ªïi nh·∫°c
      introMusic.pause();
      mainMusic.muted = false;
      mainMusic.play().catch(err => console.log("L·ªói ph√°t nh·∫°c: ", err));

      // T·∫°o hi·ªáu ·ª©ng tr√°i tim bay
      const interval = setInterval(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random() * 100 + "vw";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 4000);
      }, 200);

      // D·ª´ng hi·ªáu ·ª©ng sau 6s
      setTimeout(() => clearInterval(interval), 6000);
    };

    // N√∫t "Kh√¥ng" ch·∫°y lung tung
    noBtn.onmouseover = () => {
      const maxX = window.innerWidth - noBtn.offsetWidth;
      const maxY = window.innerHeight - noBtn.offsetHeight;
      const randomX = Math.floor(Math.random() * maxX);
      const randomY = Math.floor(Math.random() * maxY);
      noBtn.style.left = randomX + "px";
      noBtn.style.top = randomY + "px";
    };
  </script>
</body>
</html>
